!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["sparkle/initialize/initialize_sparkle.js"]=r():e["sparkle/initialize/initialize_sparkle.js"]=r()}(this,(function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=357)}({133:function(e,r){function n(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function t(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}e.exports=function(e,r){window.__bloomberg__.eventBus.subscribe("user-sign-in-status",(function n(o){var i=o.isBBGSubscriber,a=o.isTerminalSubscriber,u={isBBGSubscriber:Boolean(i),isTerminalSubscriber:Boolean(a)};!function(e,r){if(!window._fence)return void e({});window._fence.ready((function(){window._fence.isBlockedPromise.then((function(n){n.isFortressEnabled||e(t(t({},n),{},{userState:r}))}))}))}(e,u),function(e,r,n){var t="fortress-decision".concat(n?"-".concat(n):""),o=function n(o){var i=o.result,a=o.details.isUsingOverlay,u="block"===i;e({isBlocked:u,isUsingOverlay:a,userState:r}),u&&a||window.__bloomberg__.eventBus.unsubscribe(t,n)};window.__bloomberg__.eventBus.subscribe(t,o)}(e,u,r),window.__bloomberg__.eventBus.unsubscribe("user-sign-in-status",n)}))}},18:function(e,r){e.exports=function(e,r){try{return JSON.parse(e)}catch(e){return r}}},357:function(e,r,n){e.exports=n(358)},358:function(e,r,n){var t,o=n(359),i=n(360),a=n(361),u=n(133),s=n(362).BLOOMBERG_AD_NETWORK_ID,c=n(363),l={query:{enabled:!1,values:{}},superburst:{enabled:!1,srnd:null}};function d(e){return l.superburst.enabled&&(e.srnd=l.superburst.srnd),e}function b(e){return l.query.enabled?c(e,l.query.values):e}function f(){window.__bloomberg__.ads.queue.forEach((function(e){p(e)})),window.__bloomberg__.ads.queue=[],window.__bloomberg__.ads.enqueue=p}function p(e){var r=document.getElementById(e);if(r&&!r.dataset.adStatus){r.setAttribute("data-ad-status","rendering");var n=function(e){try{var r=JSON.parse(e.querySelector(".params").innerHTML);return r.url||(r.url=window.location.pathname),r.targetingModifiers=[window.__bloomberg__.byzantium.getTags,window.__bloomberg__.byzantium.getAdRecommendations,d,b],c({targeting:{url:r.url}},r)}catch(r){console.error("Could not find ad parameters:",e,"Error:",r)}}(r);u((function(e){if(!e.isBlocked||!e.isUsingOverlay){var t=a(e);m(r,n,t)}}),n.contentId)}}function w(e){if(e)for(var r=e.querySelectorAll(".page-ad"),n=0,t=r.length;n<t;++n)p(r[n].id)}function m(e,r,n){if(!e)return console.warn("Could not locate ad target element!"),Promise.reject();var t=o("#page-level-ad-config-".concat(r.contentId||r.pageId),document,{}),i={targeting:n};if(t.disableAds)return Promise.reject();var a=c.all([t,r,i]);window.Sparkle.cmd.push((function(){window.Sparkle.createAd(a).then((function(r){r.onRender((function(r){var n={element:e,config:a,adDetails:r},t=new CustomEvent("jvln-ad-render",{detail:n});e.classList.add("display"),e.setAttribute("data-ad-status","rendered"),document.dispatchEvent(t),window.__bloomberg__.eventBus.publish("sparkle-ad-render",n)})),r.onEmpty((function(){var r={element:e,config:a},n=new CustomEvent("jvln-ad-empty",{detail:r});e.setAttribute("data-ad-status","empty"),document.dispatchEvent(n),window.__bloomberg__.eventBus.publish("sparkle-ad-empty",r)})),window.__bloomberg__.ads.renderedAds[a.containerId]=r})).catch((function(e){console.error("Could not instantiate ad:",domElementId,"Error:",e)}))}))}function _(){l.persist||(l.query={enabled:!1,values:{}})}function y(){for(var e=document.getElementsByClassName("ad"),r=0;r<e.length;++r)e[r].setAttribute("debug",!0);window.Sparkle.cmd.push((function(){window.Sparkle.showDebugInformation(),window.Sparkle.showDebugInformationOnRender()}))}window.Sparkle.cmd.push((function(){var e;window.Sparkle.init({networkCode:s,breakpoints:{mobile:0,tablet:760,small_desktop:1020,large_desktop:1280},adBlockerShouldBeBlocked:(e=document.getElementsByTagName("html")[0].getAttribute("lang")||"en","ja"!==e)}),window.__bloomberg__.ads.renderAdsInElement=w,window.__bloomberg__.ads.updateCorrelator=window.Sparkle.updateCorrelator.bind(window.Sparkle),window.__bloomberg__.ads.disableRenderByQuery=_,window.__bloomberg__.ads.refresh=window.Sparkle.refresh.bind(window.Sparkle),window.__bloomberg__.ads.renderedAds={},window.showMeTheMoney=y})),window.__bloomberg__.fetchSuperBurstParam=new Promise((function(e){window.addEventListener("message",(function r(n){n.data.hasOwnProperty("srnd")&&(l.superburst={enabled:!0,srnd:n.data.srnd},window.removeEventListener("message",r),e(n.data))}))})),(t=i()).debugAds&&y(),l.persist=Boolean(t.persist),l.query={enabled:!0,values:t},f(),w(document.querySelector(".transporter-item")),document.addEventListener("jvln-flush-ad-queue",f)},359:function(e,r,n){var t=n(18);e.exports=function(e,r,n){r||(r=document);var o=r.querySelector(e);return o?t(o.textContent,n):n}},360:function(e,r){e.exports=function(){var e=window.location.search,r={},n=new RegExp("([^?=&]+)(=([^&]*))?","g");return e.replace(n,(function(e,n,t,o){r[n]=o})),r}},361:function(e,r){e.exports=function(e){var r=e.userState,n=void 0===r?{}:r,t=e.isBlocked;return n.isTerminalSubscriber?{subscriber:"term"}:n.isBBGSubscriber?{subscriber:"yes"}:t?{subscriber:"wall"}:{subscriber:"no"}}},362:function(e,r){e.exports={BLOOMBERG_AD_NETWORK_ID:"5262"}},363:function(e,r,n){"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var r=Object.prototype.toString.call(e);return"[object RegExp]"===r||"[object Date]"===r||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,r){return!1!==r.clone&&r.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,r):e;var n}function a(e,r,n){return e.concat(r).map((function(e){return i(e,n)}))}function u(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(r){return e.propertyIsEnumerable(r)})):[]}(e))}function s(e,r){try{return r in e}catch(e){return!1}}function c(e,r,n){var t={};return n.isMergeableObject(e)&&u(e).forEach((function(r){t[r]=i(e[r],n)})),u(r).forEach((function(o){(function(e,r){return s(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))})(e,o)||(s(e,o)&&n.isMergeableObject(r[o])?t[o]=function(e,r){if(!r.customMerge)return l;var n=r.customMerge(e);return"function"==typeof n?n:l}(o,n)(e[o],r[o],n):t[o]=i(r[o],n))})),t}function l(e,r,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||t,n.cloneUnlessOtherwiseSpecified=i;var o=Array.isArray(r);return o===Array.isArray(e)?o?n.arrayMerge(e,r,n):c(e,r,n):i(r,n)}l.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,r)}),{})};var d=l;e.exports=d}})}));